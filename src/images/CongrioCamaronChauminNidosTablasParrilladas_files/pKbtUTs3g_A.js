if (self.CavalryLogger) { CavalryLogger.start_js(["mia0BRn"]); }

__d("CometPageCoverSlideshowUpdateMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],b=[{kind:"Variable",name:"data",variableName:"input"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometPageCoverSlideshowUpdateMutation",selections:[{alias:null,args:b,concreteType:"PageCoverSlideshowSaveResponsePayload",kind:"LinkedField",name:"page_cover_slideshow_save",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometPageCoverRenderer_page"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometPageCoverSlideshowUpdateMutation",selections:[{alias:null,args:b,concreteType:"PageCoverSlideshowSaveResponsePayload",kind:"LinkedField",name:"page_cover_slideshow_save",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometPageCoverPhotoRenderer","CometPageCoverVideoRenderer","CometPageCoverSlideshowRenderer","PagesCometAdminCoverPhotoRenderer","PagesCometAdminCoverSlideshowRenderer","PagesCometAdminCoverVideoRenderer"]}],concreteType:null,kind:"LinkedField",name:"comet_page_cover_renderer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverPhotoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverPhotoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverVideoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverVideoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverSlideshowRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverSlideshowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverPhotoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverPhotoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverSlideshowRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverSlideshowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverVideoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverVideoRenderer",abstractKey:null}],storageKey:'comet_page_cover_renderer(supported:["CometPageCoverPhotoRenderer","CometPageCoverVideoRenderer","CometPageCoverSlideshowRenderer","PagesCometAdminCoverPhotoRenderer","PagesCometAdminCoverSlideshowRenderer","PagesCometAdminCoverVideoRenderer"])'}],storageKey:null}],storageKey:null}]},params:{id:"4032880400066184",metadata:{},name:"CometPageCoverSlideshowUpdateMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("CometPageCoverVideoUpdateMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"},{defaultValue:null,kind:"LocalArgument",name:"scale"}],b=[{kind:"Variable",name:"data",variableName:"input"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"CometPageCoverVideoUpdateMutation",selections:[{alias:null,args:b,concreteType:"PageCoverVideoSaveResponsePayload",kind:"LinkedField",name:"page_cover_video_save",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometPageCoverRenderer_page"}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"CometPageCoverVideoUpdateMutation",selections:[{alias:null,args:b,concreteType:"PageCoverVideoSaveResponsePayload",kind:"LinkedField",name:"page_cover_video_save",plural:!1,selections:[{alias:null,args:null,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[{kind:"Literal",name:"supported",value:["CometPageCoverPhotoRenderer","CometPageCoverVideoRenderer","CometPageCoverSlideshowRenderer","PagesCometAdminCoverPhotoRenderer","PagesCometAdminCoverSlideshowRenderer","PagesCometAdminCoverVideoRenderer"]}],concreteType:null,kind:"LinkedField",name:"comet_page_cover_renderer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverPhotoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverPhotoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverVideoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverVideoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"CometPageCoverSlideshowRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"CometPageCoverSlideshowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverPhotoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverPhotoRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverSlideshowRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverSlideshowRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometPageCoverRenderer_page",fragmentName:"PagesCometAdminCoverVideoRenderer_coverRenderer",fragmentPropName:"coverRenderer",kind:"ModuleImport"}],type:"PagesCometAdminCoverVideoRenderer",abstractKey:null}],storageKey:'comet_page_cover_renderer(supported:["CometPageCoverPhotoRenderer","CometPageCoverVideoRenderer","CometPageCoverSlideshowRenderer","PagesCometAdminCoverPhotoRenderer","PagesCometAdminCoverSlideshowRenderer","PagesCometAdminCoverVideoRenderer"])'}],storageKey:null}],storageKey:null}]},params:{id:"4161694223894857",metadata:{},name:"CometPageCoverVideoUpdateMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("PagesCometCoverSlideshowEditorQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"pageID"}],b=[{kind:"Variable",name:"id",variableName:"pageID"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,concreteType:"Photo",kind:"LinkedField",name:"prefilled_slideshow_photos",plural:!0,selections:[c,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"PagesCometCoverSlideshowEditorQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCover",kind:"LinkedField",name:"cover",plural:!1,selections:[d],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"PagesCometCoverSlideshowEditorQuery",selections:[{alias:null,args:b,concreteType:"Page",kind:"LinkedField",name:"page",plural:!1,selections:[{alias:null,args:null,concreteType:"PageCover",kind:"LinkedField",name:"cover",plural:!1,selections:[d,c],storageKey:null},c],storageKey:null}]},params:{id:"3726866617422651",metadata:{},name:"PagesCometCoverSlideshowEditorQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("PagesCometCoverVideoThumbnailPickerItems_video.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PagesCometCoverVideoThumbnailPickerItems_video",selections:[{alias:null,args:null,concreteType:"VideoThumbnailsConnection",kind:"LinkedField",name:"video_thumbnails",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoThumbnailsEdge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,concreteType:"VideoThumbnail",kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Video",abstractKey:null};e.exports=a}),null);
__d("CometPageCoverSlideshowPicker.react",["fbt","ix","CometAspectRatioContainer.react","CometBackgroundImage.react","CometLazyPopoverTrigger.react","CometPressable.react","CometTransientDialogProvider.react","JSResourceForInteraction","ProfileCometCoverPhotoEditContext","ProfileCometCoverPhotoUploaderContainer.react","TetraCircleButton.react","TetraIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useCallback,l=b.useContext,m=180/67,n=c("JSResourceForInteraction")("CometPageCoverSlideshowEditMenu.react").__setRef("CometPageCoverSlideshowPicker.react");function a(a){var b=a.disabled,e=b===void 0?!1:b,f=a.mediaID,g=a.pageID,o=a.slideshowIndex,p=a.uri;b=l(c("ProfileCometCoverPhotoEditContext"));var q=b.dispatch;a=b.state;var r=a.slideshowData;r=(b=r)!=null?b:[];var s=k(function(){var a=[];r.map(function(b){b.mediaID!==f&&a.push(b)});q({slideshowData:a,type:"EDIT_SLIDESHOW"})},[r,q,f]),t=k(function(){q({selectedSlideshowIndex:o,type:"CHOOSE_SLIDESHOW"})},[q,o]);a=j.jsx(c("CometTransientDialogProvider.react"),{children:j.jsx(c("ProfileCometCoverPhotoUploaderContainer.react"),{children:function(a){return j.jsx(c("CometLazyPopoverTrigger.react"),{align:"end",popoverProps:{onRemove:s,openFileSelector:a,pageID:g,slideshowIndex:o,uri:p},popoverResource:n,position:"below",children:function(a,b){var f;return j.jsx(c("CometPressable.react"),{"aria-label":h._("Edit Photo"),disabled:e,display:"inline",onPress:t,ref:a,children:j.jsx("div",{className:"k4urcfbm l9j0dhe7 stjgntxs ni8dbmo4 datstx6m qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj ljqcmsvz",children:j.jsxs(c("CometAspectRatioContainer.react"),{aspectRatio:m,children:[j.jsx(c("CometBackgroundImage.react"),{src:(f=p)!=null?f:""}),j.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 oaz4zybt i09qtzwb qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj"}),j.jsx("div",{className:"plgsh5y4 pmk7jnqg b5fwa0m2",children:j.jsx(c("TetraCircleButton.react"),{color:"primary",disabled:e,icon:d("fbicon")._(i("477824"),12),label:h._("Edit Photo"),onPress:b,ref:a,size:24})})]})})})}})}})});b=j.jsx(c("CometTransientDialogProvider.react"),{children:j.jsx(c("ProfileCometCoverPhotoUploaderContainer.react"),{children:function(a){return j.jsx(c("CometLazyPopoverTrigger.react"),{align:"start",popoverProps:{onRemove:s,openFileSelector:a,pageID:g,slideshowIndex:o,uri:p},popoverResource:n,position:"below",children:function(a,b){return j.jsx(c("CometPressable.react"),{"aria-label":h._("Edit Photo"),disabled:e,display:"inline",onPress:b,ref:a,children:j.jsx("div",{className:"k4urcfbm l9j0dhe7 stjgntxs ni8dbmo4 datstx6m qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj ljqcmsvz",children:j.jsxs(c("CometAspectRatioContainer.react"),{aspectRatio:m,children:[j.jsx("div",{className:"taijpn5t datstx6m cbu4d94t j83agx80 bp9cbjyn",children:e===!1?j.jsx(c("TetraIcon.react"),{color:"primary",icon:d("fbicon")._(i("481773"),16)}):null}),j.jsx("div",{className:"kr520xx4 j9ispegn pmk7jnqg n7fi1qx3 oaz4zybt i09qtzwb qttc61fc ihh4hy1g kdgqqoy6 jk6sbkaj"})]})})})}})}})});return p!==void 0&&p!==""?a:b}g["default"]=a}),98);
__d("CometPageCoverSlideshowUpdateMutation",["CometPageCoverSlideshowUpdateMutation.graphql","CometRelay","PagesCometAdminCompletionMeterUtils","PagesCometAdminOnboardingConstants","PagesCometAdminOnboardingUtils","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("CometPageCoverSlideshowUpdateMutation.graphql");function a(a,b,c){var e=b.items,f=b.pageID;b=function(a){d("PagesCometAdminCompletionMeterUtils").updateStatusForItemType(a,{actionType:"add_cover_photo",newStatus:"completed",pageID:f}),d("PagesCometAdminOnboardingUtils").updateOnboardingStatusForField(a,{actionItemField:d("PagesCometAdminOnboardingConstants").PAGE_COVER_PHOTO_GRAPHQL_FIELD,newValue:!1,pageID:f})};d("CometRelay").commitMutation(a,babelHelpers["extends"]({mutation:i,optimisticUpdater:b,updater:b,variables:{input:{items:e,page_id:f},scale:d("WebPixelRatio").get()}},c))}g.updatePageCoverSlideshow=a}),98);
__d("CometPageCoverVideoPlayer.react",["VideoPlayerDefaultControls.react","VideoPlayerPlaybackControl.react","VideoPlayerRelay.react","VideoPlayerSurface.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){var b=a.displayEditButton,d=a.displayPlaybackControl,e=a.shouldLoop;a=a.video;return h.jsx(c("VideoPlayerRelay.react"),{initialForceHD:!0,loopCount:e===!0?-1:0,portalingEnabled:!1,subOrigin:"pages_cover",video:a,children:h.jsx(c("VideoPlayerSurface.react"),{children:b===!0||d===!0?h.jsx(c("VideoPlayerPlaybackControl.react"),{}):h.jsx(c("VideoPlayerDefaultControls.react"),{})})})}g["default"]=a}),98);
__d("CometPageCoverVideoUpdateMutation",["CometPageCoverVideoUpdateMutation.graphql","CometRelay","PagesCometAdminCompletionMeterUtils","PagesCometAdminOnboardingConstants","PagesCometAdminOnboardingUtils","WebPixelRatio"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("CometPageCoverVideoUpdateMutation.graphql");function a(a,b,c){var e=b.containerHeight,f=b.containerWidth,g=b.loopActive,h=b.pageID,j=b.preferredThumbnailID;b=b.videoID;var k=function(a){d("PagesCometAdminCompletionMeterUtils").updateStatusForItemType(a,{actionType:"add_cover_photo",newStatus:"completed",pageID:h}),d("PagesCometAdminOnboardingUtils").updateOnboardingStatusForField(a,{actionItemField:d("PagesCometAdminOnboardingConstants").PAGE_COVER_PHOTO_GRAPHQL_FIELD,newValue:!1,pageID:h})};d("CometRelay").commitMutation(a,babelHelpers["extends"]({mutation:i,optimisticUpdater:k,updater:k,variables:{input:{cover_container_height:e,cover_container_width:f,page_id:h,preferred_thumbnail_id:j,should_cover_video_loop:g,video_id:b},scale:d("WebPixelRatio").get()}},c))}g.updateCoverVideo=a}),98);
__d("PagesCometCoverVideoThumbnailPickerItems.react",["fbt","CometLegacyHScroll.react","CometLegacyHScrollChild.react","CometRelay","PagesCometCoverVideoThumbnailPickerItems_video.graphql","TetraishEntityHeaderCoverMedia.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useState;function a(a){var e=a.onChange,f=a.onSetThumbnailLength,g=a.onThumbnailIndexChange;a=a.video;a=d("CometRelay").useFragment(i!==void 0?i:i=b("PagesCometCoverVideoThumbnailPickerItems_video.graphql"),a);var m=l(0),n=m[0],o=m[1];m=k(function(a){a!==null&&o(a.getBoundingClientRect().width)},[]);a=(a=a==null?void 0:(a=a.video_thumbnails)==null?void 0:a.edges)!=null?a:[];var p=l(0),q=p[0],r=p[1];if(a!=null&&a.length!==0){e((p=a[q].node)==null?void 0:p.id);f(a.length);g(q+1)}e=k(function(a){r(a)},[r]);return a!=null?j.jsx("div",{ref:m,children:j.jsx(c("CometLegacyHScroll.react"),{accessibilityLabel:h._("Video Thumbnails"),itemsToScroll:1,onIndexChange:e,snapPosition:"center",children:a.map(function(a,b){var d,e,f,g;d=a==null?void 0:(d=a.node)==null?void 0:d.url;e=(e=a==null?void 0:(e=a.node)==null?void 0:(e=e.image)==null?void 0:e.uri)!=null?e:"";f=(f=a==null?void 0:(f=a.node)==null?void 0:(f=f.image)==null?void 0:f.width)!=null?f:0;g=(g=a==null?void 0:(g=a.node)==null?void 0:(g=g.image)==null?void 0:g.height)!=null?g:0;(f===0||g===0)&&c("recoverableViolation")("Cover photo width / height can not be null, undefined. or 0","pages_consumer_experience_www");return j.jsx(c("CometLegacyHScrollChild.react"),{width:Math.round(n),children:j.jsx(c("TetraishEntityHeaderCoverMedia.react"),{coverMedia:{"aria-label":"Link to open page cover photo",focusX:.5,focusY:.5,height:g,linkProps:d!=null?{url:d}:void 0,mediaSource:e,width:f}})},(d=a==null?void 0:(g=a.node)==null?void 0:g.id)!=null?d:b)})})}):null}g["default"]=a}),98);
__d("PagesCometCoverContentRepositioner.react",["fbt","CometMiddot.react","CometPageCoverVideoUpdateMutation","CometRelay","CometToggle.react","PagesCometCoverVideoThumbnailPickerItems.react","ProfileCometCoverPhotoEditContext","ProfileCometCoverPhotoEditStrings","TetraText.react","TetraishEntityHeaderCoverActionBar.react","TetraishEntityHeaderCoverMedia.react","TetraishEntityHeaderCoverMediaFooter.react","deferredLoadComponent","react","requireDeferred","usePagesCometCoverPhotoUpdateMutation","useProfileCometErrorDialog_DEPRECATED"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");b=d("react");var j=b.useCallback,k=b.useContext,l=b.useState,m=c("deferredLoadComponent")(c("requireDeferred")("CometPageCoverVideoPlayer.react").__setRef("PagesCometCoverContentRepositioner.react"));function a(a){var b,e=a.containerHeight,f=a.containerWidth,g=a.pageID,n=d("CometRelay").useRelayEnvironment();a=k(c("ProfileCometCoverPhotoEditContext"));var o=a.dispatch;a=a.state;var p=a.coverPhoto;a=c("useProfileCometErrorDialog_DEPRECATED")(d("ProfileCometCoverPhotoEditStrings").SAVE_FAILED);var q=a[0];a=l(!1);var r=a[0],s=a[1];a=l({x:(a=p==null?void 0:p.focusX)!=null?a:.5,y:(a=p==null?void 0:p.focusY)!=null?a:.5});var t=a[0],u=a[1];a=j(function(a,b){u({x:a,y:b})},[]);var v=j(function(){o({type:"REPOSITION_CANCEL"})},[o]),w=p==null?void 0:p.video,x=p==null?void 0:p.thumbnails,y=l(!0),z=y[0],A=y[1];y=function(){A(!z)};var B=h._("Automatically replay video in a loop"),C=l(!1),D=C[0],E=C[1];C=l(null);var F=C[0],G=C[1];C=j(function(a){G(a)},[]);var H=l(1),I=H[0],J=H[1];H=j(function(a){J(a)},[]);var K=l(0),L=K[0],M=K[1];K=j(function(a){M(a)},[]);var N=c("usePagesCometCoverPhotoUpdateMutation")(),O=j(function(){var a;s(!0);w!=null?d("CometPageCoverVideoUpdateMutation").updateCoverVideo(n,{containerHeight:(a=e)!=null?a:0,containerWidth:(a=f)!=null?a:0,loopActive:z,pageID:g,preferredThumbnailID:F,videoID:(a=p==null?void 0:p.id)!=null?a:""},{onCompleted:function(){o({type:"REPOSITION_CANCEL"})},onError:function(a){q(a),o({type:"REPOSITION_CANCEL"})}}):N(function(){o({type:"REPOSITION_CANCEL"})},function(a){q(a),o({type:"REPOSITION_CANCEL"})},t.x,t.y,g,(a=p==null?void 0:p.id)!=null?a:"")},[e,f,p,o,n,t.x,t.y,z,g,q,F,w,N]);b=w!=null?{height:0,mediaSource:i.jsx(m,{displayPlaybackControl:!0,shouldLoop:!0,video:w}),width:0}:{focusX:t.x,focusY:t.y,height:(b=p==null?void 0:p.height)!=null?b:0,mediaSource:(b=p==null?void 0:p.uri)!=null?b:"",width:(b=p==null?void 0:p.width)!=null?b:0};C=x!=null?i.jsx(c("PagesCometCoverVideoThumbnailPickerItems.react"),{onChange:C,onSetThumbnailLength:K,onThumbnailIndexChange:H,video:x}):null;return i.jsx(c("TetraishEntityHeaderCoverMedia.react"),{backgroundMedia:{focusX:t.x,focusY:t.y,height:(K=p==null?void 0:p.height)!=null?K:0,uri:(H=p==null?void 0:p.blurredURI)!=null?H:"",width:(K=p==null?void 0:p.width)!=null?K:0},coverActionBar:i.jsx(c("TetraishEntityHeaderCoverActionBar.react"),{confirmLabel:x!=null&&!D?h._("Next"):d("ProfileCometCoverPhotoEditStrings").REPOSITION_SAVE,description:w!=null?i.jsxs("div",{className:"df5l467t j83agx80 bp9cbjyn",children:[i.jsx(c("TetraText.react"),{color:"white",type:"headline4",children:B}),i.jsx("div",{className:"ozuftl9m j83agx80",children:i.jsx(c("CometToggle.react"),{onClick:y,size:"small",value:z,children:B})})]}):null,disabled:r,onCancel:v,onConfirm:x!=null&&!D?function(){return E(!0)}:O}),coverFooter:C!==null&&D?i.jsx(c("TetraishEntityHeaderCoverMediaFooter.react"),{footer:i.jsxs(c("TetraText.react"),{color:"white",type:"bodyLink4",children:[h._("Choose a Thumbnail Image for Your Video"),i.jsx(c("CometMiddot.react"),{}),h._({"*":"{the index of the current thumbnail} \/ {the total number of thumbnails} Thumbnails","_1":"{the index of the current thumbnail} \/ {the total number of thumbnails} Thumbnail"},[h._param("the index of the current thumbnail",I),h._param("the total number of thumbnails",L),h._plural(L)])]}),footerAlign:"end"}):null,coverMedia:C!==null&&D?{height:0,mediaSource:C,width:0}:b,isDraggable:!r&&w==null,onDrag:a})}g["default"]=a}),98);
__d("PagesCometCoverSlideshowEditor.react",["fbt","CometDraggableList.react","CometErrorBoundary.react","CometLegacyHScroll.react","CometLegacyHScrollChild.react","CometPageCoverSlideshowPicker.react","CometPageCoverSlideshowUpdateMutation","CometRelay","CometToggle.react","PagesCometCoverSlideshowEditorQuery.graphql","ProfileCometCoverPhotoEditContext","ProfileCometCoverPhotoEditStrings","TetraText.react","TetraishEntityHeaderCoverActionBar.react","TetraishEntityHeaderCoverMedia.react","promiseDone","react","recoverableViolation","stylex","useCometAlertDialog","useCometConfirmationDialog","useProfileCometErrorDialog_DEPRECATED"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=d("react");e=d("react");var k=e.useCallback,l=e.useContext,m=e.useMemo,n=e.useState,o="/images/pages/finch/cover_placeholder-2x.png",p=5,q="empty_id",r={editBar:{display:"j83agx80",marginBottom:"bi6gxh9e",marginEnd:"o22cckgh",marginTop:"aov4n071",width:"k4urcfbm"},editBarItem:{marginEnd:"oi9244e8",width:"p8szoze4"},fullWidth:{width:"k4urcfbm"},toggle:{alignItems:"bp9cbjyn",display:"j83agx80",width:"m6gxxk8c"},toggleButton:{display:"j83agx80",marginStart:"ozuftl9m"}};function a(a){var e,f=a.containerHeight,g=a.containerWidth,s=a.pageID;a=l(c("ProfileCometCoverPhotoEditContext"));var t=a.dispatch,u=a.state;a=m(function(){return{dispatch:t,state:u}},[t,u]);var v=u.coverPhoto,w=u.selectedSlideshowIndex,x=u.slideshowData;x=(e=x)!=null?e:[];e=n(0);var y=e[0],z=e[1];e=k(function(a){a!=null&&z(a.getBoundingClientRect().width)},[]);var A=c("useProfileCometErrorDialog_DEPRECATED")(d("ProfileCometCoverPhotoEditStrings").SAVE_FAILED_DEFAULT),B=A[0],C=k(function(a){a!==w&&t({selectedSlideshowIndex:a,type:"CHOOSE_SLIDESHOW"})},[t,w]),D={x:.5,y:.5},E=i!==void 0?i:i=b("PagesCometCoverSlideshowEditorQuery.graphql");A=n(!1);var F=A[0],G=A[1];A=n(x);var H=A[0],I=A[1];A=function(){!F?(t({type:"EDIT_SLIDESHOW_STARTED"}),c("promiseDone")(d("CometRelay").fetchQuery(K,E,{pageID:s}).toPromise().then(function(a){a=(a=a==null?void 0:(a=a.page)==null?void 0:(a=a.cover)==null?void 0:a.prefilled_slideshow_photos)!=null?a:[];var b=[];a.map(function(a){var c;b.push({focus:D,image:{height:(c=a==null?void 0:(c=a.image)==null?void 0:c.height)!=null?c:0,uri:(c=a==null?void 0:(c=a.image)==null?void 0:c.uri)!=null?c:o,width:(c=a==null?void 0:(c=a.image)==null?void 0:c.width)!=null?c:0},mediaID:(c=a.id)!=null?c:""})});t({slideshowData:b,type:"EDIT_SLIDESHOW"});I(x)}))):(t({slideshowData:H,type:"EDIT_SLIDESHOW"}),I(x)),G(!F)};var J=h._("Let Facebook Choose Photos"),K=d("CometRelay").useRelayEnvironment(),L=c("useCometConfirmationDialog")(),M=L[0];L=k(function(){M({body:h._("If you go back, your changes won't be saved."),cancel:h._("Cancel"),confirm:h._("Leave Slideshow"),title:h._("Leave Slideshow?")},function(){t({type:"EDIT_SLIDESHOW_CANCEL"})})},[t,M]);var N=c("useCometAlertDialog")(),O=N[0];N=k(function(){t({type:"EDIT_SLIDESHOW_STARTED"});var a=[];x.map(function(b){if(b.mediaID!=null&&b.mediaID!==q){var c;a.push({focus:{x:(c=(c=b.focus)==null?void 0:c.x)!=null?c:D.x,y:(c=(c=b.focus)==null?void 0:c.y)!=null?c:D.y},id:b.mediaID})}});if(a.length===0){O({body:h._("To save your slideshow, first add photos. To delete your cover photo, return to your Page and select Remove in the cover area."),title:h._("Slideshow Not Saved")});t({type:"EDIT_SLIDESHOW_CANCEL"});return}d("CometPageCoverSlideshowUpdateMutation").updatePageCoverSlideshow(K,{items:a,pageID:s},{onCompleted:function(){t({type:"EDIT_SLIDESHOW_CANCEL"})},onError:function(a){B(a),t({type:"EDIT_SLIDESHOW_CANCEL"})}})},[D,t,K,s,O,B,x]);v={focus:{x:D.x,y:D.y},image:{height:v==null?void 0:v.height,uri:v==null?void 0:v.uri,width:v==null?void 0:v.width},mediaID:q};(x===null||x.length===0)&&(x=[v]);v=!1;var P=k(function(a,b){if(w!=null&&w<x.length){var c;x[(c=w)!=null?c:0].focus={x:a,y:b}}t({slideshowData:x,type:"EDIT_SLIDESHOW"})},[t,w,x]);e=j.jsx("div",{ref:e,children:j.jsx(c("CometLegacyHScroll.react"),{accessibilityLabel:h._("Page Cover Slideshow"),itemsToScroll:1,onIndexChange:C,snapPosition:"center",startIndex:((e=w)!=null?e:0)===x.length?null:w,children:x.map(function(a,b){var d,e,i,k;d=(d=a==null?void 0:(d=a.image)==null?void 0:d.uri)!=null?d:o;e=(e=a==null?void 0:(e=a.image)==null?void 0:e.width)!=null?e:f;i=(i=a==null?void 0:(i=a.image)==null?void 0:i.height)!=null?i:g;(a==null?void 0:a.mediaID)===q&&(v=!0);(e===0||i===0)&&c("recoverableViolation")("Cover photo width / height can not be null, undefined. or 0","pages_consumer_experience_www");var l=a==null?void 0:a.focus;return j.jsx(c("CometLegacyHScrollChild.react"),{width:Math.round(y),children:j.jsx(c("TetraishEntityHeaderCoverMedia.react"),{coverMedia:{"aria-label":h._("Edit Photo"),focusX:(k=l==null?void 0:l.x)!=null?k:.5,focusY:(k=l==null?void 0:l.y)!=null?k:.5,height:(l=i)!=null?l:0,mediaSource:d,width:(k=e)!=null?k:0},isDraggable:!0,onDrag:function(a,c){C(b),P(a,c)}})},(a==null?void 0:a.mediaID)!=null?(a==null?void 0:a.mediaID)+b:b)})})});e={height:0,mediaSource:e,width:0};var Q=[];x.length<p&&v===!1&&Q.push({image:null,mediaID:q});while(x.length+Q.length<p)Q.push(null);Q=x.concat(Q);var R=!1;Q=Q.map(function(a,b){var d;d=j.jsx("div",{className:c("stylex")(r.editBarItem),children:j.jsx(c("CometErrorBoundary.react"),{children:j.jsx(c("CometPageCoverSlideshowPicker.react"),{disabled:R||u.isUploading,mediaID:a==null?void 0:a.mediaID,pageID:s,slideshowIndex:b,uri:a==null?void 0:(d=a.image)==null?void 0:d.uri})})},(a==null?void 0:a.mediaID)!=null?(a==null?void 0:a.mediaID)+b:b);R===!1&&(a==null?void 0:a.mediaID)===q&&(R=!0);return d});var S=function(a,b,c){if(b>=x.length||c>=x.length)return;x.splice(c,0,x.splice(b,1)[0]);t({slideshowData:x,type:"EDIT_SLIDESHOW"})};Q=j.jsx("div",{className:c("stylex")(r.editBar),children:j.jsx(c("CometDraggableList.react"),{direction:"horizontal",expanded:!0,items:Q,onReorder:S,xstyle:r.fullWidth})});return j.jsx(c("ProfileCometCoverPhotoEditContext").Provider,{value:a,children:j.jsx(c("TetraishEntityHeaderCoverMedia.react"),{coverActionBar:j.jsx(c("TetraishEntityHeaderCoverActionBar.react"),{confirmLabel:d("ProfileCometCoverPhotoEditStrings").REPOSITION_SAVE,description:j.jsxs("div",{className:c("stylex")(r.toggle),children:[j.jsx(c("TetraText.react"),{color:"white",type:"headline4",children:J}),j.jsx("div",{className:c("stylex")(r.toggleButton),children:j.jsx(c("CometToggle.react"),{disabled:u.isUploading,onClick:A,size:"small",value:F,children:J})})]}),disabled:u.isUploading,onCancel:L,onConfirm:N}),coverHeader:Q,coverMedia:e})})}g["default"]=a}),98);